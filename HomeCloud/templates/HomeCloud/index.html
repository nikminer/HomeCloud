{%load staticfiles%}
<script src='{% static "canvasjs.min.js" %}'></script>
<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
<link rel="stylesheet" href="{% static 'styles/index.css' %}" rel="stylesheet" type="text/css">
<link rel="icon" href="{% static 'images/favicon.ico' %}" type="image/x-icon">
<title>HomeCloud</title>

<body>
    {% include "./blocks/logo.html" %}
    {% include "./blocks/navigation.html" %}
        <div id=page>
            <div id=content>
                {% if Sysproblem %}
                    <span style="grid-area: title; background-color: #e15f41!important"class="title">System information ( {{Sysproblem}} )</span>
                {%else%}
                    <span style="grid-area: title; background-color: #778beb" class="title">System information</span>
                {%endif%} 
                <span style="grid-area: osname;">Operation System: <b>{{osname}}</b></span>
                <span style="grid-area: hostname;">Hostname: <b>{{Node}}</b></span>
                <span style="grid-area: cpuname;">CPU name: <b>{{CPUname}}</b></span>
                <span style="grid-area: cpucount;">CPU count:<b> {{CPUcount}} core</b></span>
                <span style="grid-area: cpupercent;"> CPU Usage: 
                    <div class="w3-light-grey">
                        <div class="w3-container w3 w3-center" id=cpuusage style="width:0%;background-color:#63cdda; color: white">00%</div>
                    </div>
                </span>
                <span style="grid-area: title1;" class="title">Memory information</span>
                <span style="grid-area: title2;" class="title">Network information</span>
                <span style="grid-area: Netinfo1;"> Data sent:<b> {{bytesent}}</b></span>
                <span style="grid-area: Netinfo2;"> Data receive:<b> {{byterecv}}</b></span>
                <span style="grid-area: Netinfo3;"> Packets sent:<b> {{packsent}}</b></span>
                <span style="grid-area: Netinfo4;"> Packets receive:<b> {{packrecv}}</b></span>
                {% if iflist%}
                <ul style="grid-area: IFList; list-style:none">
                    <span>Network interface:</span>
                    {% for i in iflist.items %} 
                    <details>
                            <summary>{{i.0}}</summary>
                            {% for i1 in i.1%}
                                <p>Address:<b>{{i1.address}}</b> Netmask:<b>{{i1.netmask}}</b> Broadcast:<b>{{i1.broadcast}}</b></p>
                            {%endfor%}
                    </details>
                    
                    {% endfor %}
                </ul>
                {%endif%}
                <div id=chart></div>
                <div id=VMemory></div>
                <div id=SMemory></div>
            </div>
        </div>
        {% include "./blocks/footer.html" %}
</body>

<script>
    window.onload=function(){
        var chart=new CanvasJS.Chart("chart",{
            animationEnabled:true,
            title:{text:"Main Disk Usage ({{diskspace.total}} GB)",fontFamily:"arial"},
            data:[{
                type:"pie",
                startAngle:45,
                yValueFormatString: "##0.000\" GB\"",
                indexLabel:"{label} {y}",
                dataPoints:[
                    {y:'{{diskspace.free}}',label:"Свободно", color:"#63cdda"},
                    {y:'{{diskspace.used}}',label:"Занято", color:"#e15f41"}
                ]
            }]
        });
        chart.render();

        var Vemory=new CanvasJS.Chart("VMemory",{
            animationEnabled:true,
            title:{text:"Virtual Memory ({{VMtotalspace}} GB)",fontFamily:"arial"},
            data:[{
                type:"pie",
                startAngle:45,
                yValueFormatString: "##0.000\" GB\"",
                indexLabel:"{label} {y}",
                dataPoints:[
                    {y:'{{VMfreespace}}',label:"Свободно", color:"#63cdda",},
                    {y:'{{VMusedspace}}',label:"Занято", color:"#e15f41"}
                ]
            }]
        });
        Vemory.render();
        var Semory=new CanvasJS.Chart("SMemory",{
            animationEnabled:true,
            title:{text:"Swap Memory ({{SMtotalspace}} GB)",fontFamily:"arial"},
            data:[{
                type:"pie",
                startAngle:45,
                yValueFormatString: "##0.000\" GB\"",
                indexLabel:"{label} {y}",
                dataPoints:[
                    {y:'{{SMfreespace}}',label:"Свободно", color:"#63cdda"},
                    {y:'{{SMusedspace}}',label:"Занято", color:"#e15f41"}
                ]
            }]
        });
        Semory.render();
    }
</script>

<script src="{% static 'scripts/updatedata.js' %}"></script>